# Развёртывание Easy!Appointments на Railway

Пошаговая инструкция по развёртыванию системы онлайн-бронирования Easy!Appointments на платформе Railway.

## Предварительные требования

- Аккаунт на [Railway](https://railway.app/)
- GitHub аккаунт (для деплоя из репозитория)

## Шаг 1: Создание проекта в Railway

1. Войдите в [Railway Dashboard](https://railway.app/dashboard)
2. Нажмите **New Project**
3. Выберите **Deploy from GitHub repo**
4. Авторизуйте Railway для доступа к вашему GitHub
5. Выберите репозиторий с Easy!Appointments

## Шаг 2: Добавление базы данных MySQL

1. В вашем проекте нажмите **New** → **Database** → **Add MySQL**
2. Railway автоматически создаст MySQL сервис
3. Переменные подключения будут доступны автоматически:
   - `MYSQLHOST`
   - `MYSQLDATABASE`
   - `MYSQLUSER`
   - `MYSQLPASSWORD`
   - `MYSQLPORT`

## Шаг 3: Настройка переменных окружения

В настройках вашего сервиса (не MySQL) добавьте переменные:

| Переменная | Значение | Описание |
|------------|----------|----------|
| `BASE_URL` | `https://ваш-проект.up.railway.app` | URL вашего приложения (без `/` в конце) |
| `LANGUAGE` | `russian` | Язык интерфейса (по умолчанию: russian) |
| `DEBUG_MODE` | `false` | Режим отладки |

### Подключение к базе данных

Railway автоматически предоставляет переменные MySQL. Приложение использует их напрямую:
- `MYSQLHOST` → хост базы данных
- `MYSQLDATABASE` → имя базы данных
- `MYSQLUSER` → пользователь
- `MYSQLPASSWORD` → пароль
- `MYSQLPORT` → порт

Если вы хотите использовать свои имена переменных, добавьте:
- `DB_HOST`
- `DB_NAME`
- `DB_USERNAME`
- `DB_PASSWORD`
- `DB_PORT`

## Шаг 4: Получение URL приложения

1. Перейдите в настройки сервиса → **Settings** → **Networking**
2. Нажмите **Generate Domain** для получения публичного URL
3. Скопируйте URL (например: `https://easyappointments-production.up.railway.app`)
4. Обновите переменную `BASE_URL` этим значением

## Шаг 5: Первоначальная установка

1. Откройте URL вашего приложения в браузере
2. Вы увидите мастер установки Easy!Appointments
3. Заполните данные администратора:
   - Имя компании
   - Email компании
   - Ссылка на сайт
   - Данные администратора (имя, email, пароль)
4. Нажмите **Установить**

## Шаг 6: Проверка работы

После установки:
1. Откройте главную страницу — вы увидите форму бронирования на русском языке
2. Войдите в панель администратора по адресу `/backend`
3. Настройте услуги, исполнителей и расписание

## Дополнительные настройки

### Google Calendar синхронизация

Для включения синхронизации с Google Calendar добавьте переменные:
- `GOOGLE_SYNC_FEATURE` = `true`
- `GOOGLE_CLIENT_ID` = ваш Client ID
- `GOOGLE_CLIENT_SECRET` = ваш Client Secret

### Смена языка

Для смены языка по умолчанию измените переменную `LANGUAGE`:
- `russian` — Русский
- `english` — English
- `ukrainian` — Українська
- [Полный список языков](application/config/config.php)

## Устранение неполадок

### Ошибка подключения к базе данных

1. Проверьте что MySQL сервис запущен в Railway
2. Убедитесь что переменные `MYSQL*` доступны в вашем сервисе
3. Проверьте логи в Railway Dashboard

### Страница не загружается

1. Проверьте логи деплоя в Railway
2. Убедитесь что `BASE_URL` указан правильно
3. Проверьте что домен сгенерирован в настройках Networking

### Интерфейс на английском

1. Проверьте переменную `LANGUAGE` = `russian`
2. Перезапустите деплой после изменения переменных

## Полезные ссылки

- [Документация Easy!Appointments](https://easyappointments.org/docs)
- [Документация Railway](https://docs.railway.app/)
- [Исходный код](https://github.com/alextselegidis/easyappointments)
